<script setup>
import { ref } from 'vue'
import { storeToRefs } from 'pinia';
import { useAuthStore } from '@/stores';

const props = defineProps(['activate']);
let menuMobile = ref(0)
function toggleMenu() {
    menuMobile = !menuMobile.value;
}

const authStore = useAuthStore();
const { user/*, permissions*/ } = storeToRefs(authStore);
</script>

<template>
    <nav v-if="user" id="menu" class="only-desktop-menu" :class="{aberto: menuMobile}">
        <div class="top">
            <a href="javascript:void(0);" id="m_profile">
                <span class="profile-name">
                    {{user.nome_exibicao}}
                </span>
                <div>
                    <p>i</p>
                </div>
            </a>
            <router-link to="/" @click="toggleMenu" :class="{active: activate=='SubmenuConfig'}">
                <span>Início</span>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M18 12V11.2V8.8V8.001H3.6L2 8V12H18ZM18 6V5.2V2.8V2.001H3.6L2 2V6H18ZM2 0H17.99C19.33 0 20 0.668 20 2V17.92C20 19.307 19.333 20 18 20H2C0.667 20 0 19.307 0 17.92V2C0 0.667 0.667 0 2 0ZM3.6 14H2V18H18V17.2V14.8V14.001H3.6V14ZM4 5C3.73478 5 3.48043 4.89464 3.29289 4.70711C3.10536 4.51957 3 4.26522 3 4C3 3.73478 3.10536 3.48043 3.29289 3.29289C3.48043 3.10536 3.73478 3 4 3C4.26522 3 4.51957 3.10536 4.70711 3.29289C4.89464 3.48043 5 3.73478 5 4C5 4.26522 4.89464 4.51957 4.70711 4.70711C4.51957 4.89464 4.26522 5 4 5ZM4 11C3.73478 11 3.48043 10.8946 3.29289 10.7071C3.10536 10.5196 3 10.2652 3 10C3 9.73478 3.10536 9.48043 3.29289 9.29289C3.48043 9.10536 3.73478 9 4 9C4.26522 9 4.51957 9.10536 4.70711 9.29289C4.89464 9.48043 5 9.73478 5 10C5 10.2652 4.89464 10.5196 4.70711 10.7071C4.51957 10.8946 4.26522 11 4 11ZM4 17C3.73478 17 3.48043 16.8946 3.29289 16.7071C3.10536 16.5196 3 16.2652 3 16C3 15.7348 3.10536 15.4804 3.29289 15.2929C3.48043 15.1054 3.73478 15 4 15C4.26522 15 4.51957 15.1054 4.70711 15.2929C4.89464 15.4804 5 15.7348 5 16C5 16.2652 4.89464 16.5196 4.70711 16.7071C4.51957 16.8946 4.26522 17 4 17Z"/>
                </svg>
            </router-link>
            <!-- <router-link to="/" @click="toggleMenu">
                <span></span>
                <svg width="22" height="20" viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg" fill="currentColor"> <path d="M11 7.5C11.8284 7.5 12.5 6.82843 12.5 6C12.5 5.17157 11.8284 4.5 11 4.5C10.1716 4.5 9.5 5.17157 9.5 6C9.5 6.82843 10.1716 7.5 11 7.5Z"/> <path d="M20.0143 20H1.97184C1.65181 19.9886 1.33917 19.901 1.06007 19.7445C0.780961 19.588 0.543515 19.367 0.367592 19.1003C0.16891 18.8295 0.0456912 18.5112 0.0104681 18.1775C-0.0247549 17.8439 0.029274 17.5069 0.16706 17.2009L2.27264 12.2025C2.44359 11.8431 2.71341 11.5396 3.05068 11.3272C3.38794 11.1149 3.77878 11.0024 4.17768 11.0029H5.9798V13.0022H4.17768L1.97184 18.0006H20.0143L17.9087 13.0022H16.0064V11.0029H17.9087C18.2993 10.9808 18.6865 11.0858 19.0121 11.3022C19.3376 11.5186 19.5837 11.8345 19.7135 12.2025L21.8191 17.2009C21.9535 17.503 22.0145 17.8325 21.9971 18.1625C21.9797 18.4926 21.8843 18.8139 21.7188 19.1003C21.5216 19.3691 21.2657 19.5899 20.9704 19.7457C20.6751 19.9016 20.3482 19.9885 20.0143 20Z"/> <path d="M10.9459 16C10.6127 15.9738 10.3029 15.8255 10.0811 15.5859C9.21621 14.4469 5 9 5 6.06041C5 2.77921 7.45136 0 11 0C14.5493 0 17 2.76786 17 6.06041C17 9 12.6757 14.4469 11.8108 15.5859C11.589 15.8255 11.2792 15.9738 10.9459 16ZM11 2C8.70174 2 7 3.96318 7 6.06041C7 8 9.21621 10.8231 10.9459 13.2045C12.6757 10.8231 15 8 15 6.06041C14.9386 3.94287 13.3207 1.99914 11 2Z"/> </svg>
            </router-link>
            <router-link to="/" @click="toggleMenu">
                <span></span>
                <svg width="18" height="20" viewBox="0 0 18 20" xmlns="http://www.w3.org/2000/svg" fill="currentColor"> <path d="M16.9948 0.00629546H0.999714C0.734573 0.00629546 0.480291 0.111637 0.292809 0.299119C0.105326 0.486602 0 0.740869 0 1.00601V19.0003C0.0225224 19.2579 0.135082 19.4993 0.31791 19.6821C0.500737 19.8649 0.74214 19.9775 0.999714 20H16.9948C17.26 20 17.5143 19.8947 17.7018 19.7072C17.8892 19.5197 17.9946 19.2654 17.9946 19.0003V1.00601C18.0106 0.870853 17.9958 0.733824 17.9513 0.605215C17.9067 0.476606 17.8336 0.359789 17.7373 0.263546C17.6411 0.167303 17.5243 0.0941436 17.3957 0.0495875C17.267 0.00503137 17.13 -0.00978041 16.9948 0.00629546ZM1.99943 2.00572H3.99886V18.0006H1.99943V2.00572ZM15.9951 18.0006H5.99828V2.00572H8.99714V8.99742L11.4964 6.998L13.9957 8.99742V2.00572H15.9951V18.0006Z"/> </svg>
            </router-link>
            <router-link to="/" @click="toggleMenu">
                <span></span>
                <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill="currentColor"> <path d="M18 0H2C1.46957 0 0.960858 0.210712 0.585785 0.585785C0.210712 0.960858 0 1.46957 0 2V18C0 18.5304 0.210712 19.0391 0.585785 19.4142C0.960858 19.7893 1.46957 20 2 20H18C18.5304 20 19.0391 19.7893 19.4142 19.4142C19.7893 19.0391 20 18.5304 20 18V2C20 1.46957 19.7893 0.960858 19.4142 0.585785C19.0391 0.210712 18.5304 0 18 0ZM18 2V6H17.6L16 7.59999L11.9 3.5L7.9 8.5L5 5.59999L2.6 8H2V2H18ZM2 18V10H3.4L5 8.39999L8.1 11.5L12.1 6.5L16 10.4L18.5 8H18V18H2Z"/> <path d="M5 14H3V17H5V14Z"/> <path d="M9 13H7V17H9V13Z"/> <path d="M13 11H11V17H13V11Z"/> <path d="M17 13H15V17H17V13Z"/> </svg>
            </router-link>
            <router-link to="/" @click="toggleMenu">
                <span></span>
                <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill="currentColor"> <path d="M18 12V11.2V8.8V8.001H3.6L2 8V12H18ZM18 6V5.2V2.8V2.001H3.6L2 2V6H18ZM2 0H17.99C19.33 0 20 0.668 20 2V17.92C20 19.307 19.333 20 18 20H2C0.667 20 0 19.307 0 17.92V2C0 0.667 0.667 0 2 0ZM3.6 14H2V18H18V17.2V14.8V14.001H3.6V14ZM4 5C3.73478 5 3.48043 4.89464 3.29289 4.70711C3.10536 4.51957 3 4.26522 3 4C3 3.73478 3.10536 3.48043 3.29289 3.29289C3.48043 3.10536 3.73478 3 4 3C4.26522 3 4.51957 3.10536 4.70711 3.29289C4.89464 3.48043 5 3.73478 5 4C5 4.26522 4.89464 4.51957 4.70711 4.70711C4.51957 4.89464 4.26522 5 4 5ZM4 11C3.73478 11 3.48043 10.8946 3.29289 10.7071C3.10536 10.5196 3 10.2652 3 10C3 9.73478 3.10536 9.48043 3.29289 9.29289C3.48043 9.10536 3.73478 9 4 9C4.26522 9 4.51957 9.10536 4.70711 9.29289C4.89464 9.48043 5 9.73478 5 10C5 10.2652 4.89464 10.5196 4.70711 10.7071C4.51957 10.8946 4.26522 11 4 11ZM4 17C3.73478 17 3.48043 16.8946 3.29289 16.7071C3.10536 16.5196 3 16.2652 3 16C3 15.7348 3.10536 15.4804 3.29289 15.2929C3.48043 15.1054 3.73478 15 4 15C4.26522 15 4.51957 15.1054 4.70711 15.2929C4.89464 15.4804 5 15.7348 5 16C5 16.2652 4.89464 16.5196 4.70711 16.7071C4.51957 16.8946 4.26522 17 4 17Z"/> </svg>
            </router-link>
            <router-link to="/" @click="toggleMenu">
                <span></span>
                <svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" fill="currentColor"> <path d="M5.25252 17.9261C5.28225 17.8306 5.31458 17.7358 5.34949 17.6418C5.62916 16.8887 6.06814 16.2043 6.63622 15.6362C7.20429 15.0681 7.88819 14.6292 8.64132 14.3495C9.39444 14.0698 10.1988 13.9558 11 14.0154C11.8012 13.9558 12.606 14.0698 13.3592 14.3495C14.1123 14.6292 14.7962 15.0681 15.3643 15.6362C15.9323 16.2043 16.3708 16.8887 16.6505 17.6418C16.6854 17.7358 16.7178 17.8306 16.7475 17.9261C18.7347 16.2752 20 13.7854 20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 13.7854 3.26532 16.2752 5.25252 17.9261ZM22 11C22 17.0751 17.0751 22 11 22C4.92487 22 0 17.0751 0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11ZM11 12C12.6569 12 14 10.6569 14 9C14 7.34315 12.6569 6 11 6C9.34315 6 8 7.34315 8 9C8 10.6569 9.34315 12 11 12Z"/> </svg>
            </router-link> -->
        </div>

        <div class="bottom">        
            <a @click="authStore.logout()">
                <span>Logout</span>
                <svg width="22" height="22" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3 2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v13h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V2zm1 13h8V2H4v13z"/><path d="M9 9a1 1 0 1 0 2 0 1 1 0 0 0-2 0z"/></svg>
            </a>
            <router-link to="/usuarios" @click="toggleMenu">
                <span>Usuários</span>
                <svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M18.2425 4.24239L18.2425 2H19.7577V4.24239H22.0001V5.75762H19.7577V8H18.2425L18.2425 5.75762H16.0001V4.24239H18.2425ZM11.0001 13.5294C13.0793 13.5294 14.7648 11.8439 14.7648 9.76471C14.7648 7.68552 13.0793 6 11.0001 6C8.92093 6 7.23541 7.68552 7.23541 9.76471C7.23541 11.8439 8.92093 13.5294 11.0001 13.5294ZM11.0001 14.4899C9.99473 14.4151 8.9853 14.5582 8.0402 14.9092C7.0951 15.2601 6.23687 15.811 5.524 16.5239C4.81112 17.2368 4.26024 18.0956 3.90927 19.0407C3.55831 19.9858 3.41522 20.9946 3.49001 22H18.5102C18.585 20.9946 18.4419 19.9858 18.091 19.0407C17.74 18.0956 17.1897 17.2368 16.4768 16.5239C15.764 15.811 14.9057 15.2601 13.9606 14.9092C13.0155 14.5582 12.0055 14.4151 11.0001 14.4899Z"/></svg>
            </router-link>
        </div>
    
        <div class="overlay only-desktop"></div>
    </nav>
</template>
<style lang="less">
    @import '@/_less/variables.less';
    #menu{
        position: fixed; left: 0; top: 0; bottom: 0; background: @primary; color: @amarelo; z-index: 11; .transition();
        a{
            font-weight: 700; display: block; padding: 23px 23px; border-bottom: 1px solid fadeOut(@c100,80%); .transition();
            span{
                display: inline-block; vertical-align: middle; overflow: hidden; width: 0; .opacity(0); height: 20px; line-height: 20px; .transition();
                &.profile-name {text-transform: capitalize;}
            }
            svg{
                display: inline-block; vertical-align: middle;
                *{.transition();}
            }
            &:hover{
                color: @amarelo; padding-top: 40px; padding-bottom: 40px;
            }
            &:active, &.active, &.inv{
                background: @amarelo; color: @primary;
            }
            &#m_profile {
                background-color: #07141A;
                div {
                    position: relative; right: 3px; top: 1px;
                    display: inline-block; height: 25px; width: 25px;
                    border: 3px solid @amarelo; border-radius: 50%;
                    color: @amarelo;
                    p{
                        line-height:19px; margin: 0 2px 0 1px; text-align: center;
                    }
                }
            }
        }
        .bottom {
            position:absolute; bottom:0; width:100%;
        }
        &:hover{
            .bs(0 0 40px 20px fadeOut(black,80%));
            a{
                span{width: 120px; .opacity(1);}
            }
        }

        @media(max-height: 570px){
            a{
                padding: 15px;
                &:hover{padding: 15px;}
            }
        }
    }
</style>